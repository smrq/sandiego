TARGET=brain
MCU=atmega32u4
CPU=16000000

ARCH=AVR8
LUFASOURCES=\
	$(VENDORDIR)/LUFA/Drivers/USB/Core/ConfigDescriptors.c \
	$(VENDORDIR)/LUFA/Drivers/USB/Core/DeviceStandardReq.c \
	$(VENDORDIR)/LUFA/Drivers/USB/Core/Events.c \
	$(VENDORDIR)/LUFA/Drivers/USB/Core/USBTask.c \
	$(VENDORDIR)/LUFA/Drivers/USB/Core/$(ARCH)/Device_$(ARCH).c \
	$(VENDORDIR)/LUFA/Drivers/USB/Core/$(ARCH)/Endpoint_$(ARCH).c \
	$(VENDORDIR)/LUFA/Drivers/USB/Core/$(ARCH)/EndpointStream_$(ARCH).c \
	$(VENDORDIR)/LUFA/Drivers/USB/Core/$(ARCH)/USBController_$(ARCH).c \
	$(VENDORDIR)/LUFA/Drivers/USB/Core/$(ARCH)/USBInterrupt_$(ARCH).c
LUFAOBJECTS=$(LUFASOURCES:$(VENDORDIR)/%.c=$(OBJDIR)/vendor/%.o)
LUFAFLAGS=-DF_USB=$(CPU)
LUFAFLAGS+=-DUSE_STATIC_OPTIONS='(USB_OPT_AUTO_PLL|USB_OPT_REG_ENABLED|USB_DEVICE_OPT_FULLSPEED)'
LUFAFLAGS+=-DUSB_DEVICE_ONLY
LUFAFLAGS+=-DUSE_FLASH_DESCRIPTORS
LUFAFLAGS+=-DFIXED_CONTROL_ENDPOINT_SIZE=8
LUFAFLAGS+=-DDEVICE_STATE_AS_GPIOR=0
LUFAFLAGS+=-DFIXED_NUM_CONFIGURATIONS=1
LUFAFLAGS+=-DINTERRUPT_CONTROL_ENDPOINT

OBJECTS=$(LUFAOBJECTS)
ARCHFLAGS=$(LUFAFLAGS)

include ../shared/shared.mk

fuse:
	$(AVRDUDE) -U lfuse:w:0x5F:m -U hfuse:w:0xDF:m -U efuse:w:0xF4:m

.PHONY: fuse
